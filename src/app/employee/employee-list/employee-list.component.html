<h2>Employee List</h2>

<div>
  <input type="text" [(ngModel)]="searchQuery" placeholder="Search by department or position">
  <button (click)="searchEmployees()">Search</button>
  <button (click)="loadEmployees()">Clear Search</button>
</div>

<button (click)="openAddModal()">Add New Employee</button>

<table>
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let employee of employees">
      <td>{{ employee.first_name }}</td>
      <td>{{ employee.last_name }}</td>
      <td>{{ employee.email }}</td>
      <td>
        <button (click)="openViewModal(employee)">View</button>
        <button (click)="openEditModal(employee)">Edit</button>
        <button (click)="deleteEmployee(employee.id!)">Delete</button>
      </td>
    </tr>
    <tr *ngIf="employees.length === 0">
      <td colspan="6">No employees found.</td>
    </tr>
  </tbody>
</table>

<button (click)="logout()">Logout</button>

<app-employee-add-edit
  *ngIf="showAddModal || showEditModal"
  [isEditMode]="showEditModal"
  [employee]="selectedEmployee"
  [employeeId]="editEmployeeId"
  (close)="closeModal()"
  (employeeSaved)="closeModal()"
></app-employee-add-edit>

<app-employee-view
  *ngIf="showViewModal"
  [employee]="selectedEmployee"
  (close)="closeModal()"
></app-employee-view>